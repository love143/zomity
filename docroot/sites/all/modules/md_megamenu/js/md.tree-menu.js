!function(e){e(function(){e.fn.megadrupalTreeMenu=function(){var o=e(this);not=e("li",o).has("div.dropzone"),e("li",o).not(not).prepend('<div class="dropzone"></div>'),e("dl, .dropzone",o).droppable({accept:"li.dragitem",tolerance:"pointer",drop:function(n,r){var d=e(this).parent(),l=!e(this).hasClass("dropzone");l&&0==d.children("ul").length&&d.append("<ul/>"),l?d.addClass("sm2_liOpen").removeClass("sm2_liClosed").children("ul").append(r.draggable):d.before(r.draggable),e("li.sm2_liOpen",o).not(":has(li:not(.ui-draggable-dragging))").removeClass("sm2_liOpen"),d.find("dl,.dropzone").css({backgroundColor:"",borderColor:""})},over:function(){e(this).filter("dl").css({backgroundColor:"#F90"}),e(this).filter(".dropzone").css({borderColor:"#F90"})},out:function(){e(this).filter("dl").css({backgroundColor:""}),e(this).filter(".dropzone").css({borderColor:""})}}),e("li",o).draggable({handle:" > dl",opacity:.8,addClasses:!1,helper:"clone",zIndex:100})},e("#dropdown").megadrupalTreeMenu(),e("#dropdown dl").live("mouseenter",function(){e(this).addClass("hover")}).live("mouseleave",function(){e(this).removeClass("hover")}),e("#btn_add").click(function(){e("#dropdown").append(e("#dropdown li:last").clone()),e("#dropdown").megadrupalTreeMenu()})})}(jQuery);
