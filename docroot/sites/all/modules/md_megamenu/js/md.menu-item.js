!function(e){var t={dlg_item:null,blocks:e(".connectedSortable"),elitems:e("#essentialitems"),init:function(){e(window).resize(),e(".md-bl",t.elitems).draggable({revert:"invalid",connectToSortable:".inner.ui-sortable",handle:"a.handle",helper:function(t){var i="Add the block";return void 0!==t.currentTarget&&void 0!=e(t.currentTarget).attr("data-title")&&(i=e(t.currentTarget).attr("data-title")),e("<div class='ui-widget-header'>"+i+"</div>")}}),this.mdcolsort(),this.dragBlocks(),this.bindClickEvent(),this.dlg_item=e("#dlg-item").dialog({resizable:!1,autoOpen:!1,draggable:!1,modal:!0,width:480,buttons:{Apply:function(){var t=e(this).data("eitem");return t.find("input.setting").val(e("#dlg-item form").serialize()),t.addClass("ei-processed"),t.find(".ei-text span").html(e("#dlg-item form").find('input[name="title"]').val()),e(this).dialog("close"),!0},Cancel:function(){e(this).dialog("close")},Remove:function(){e(this).dialog("close");var t=e(this).data("eitem");t.remove()}},close:function(){var t=e(this).data("eitem");t.hasClass("ei-processed")||t.remove()},open:function(){jQuery(".ui-widget-overlay").bind("click",function(){e("#dlg-item").dialog("close")})}})},bindClickEvent:function(){e(".ei-edit").live("click",function(){return t.essentialItems(e(this).parent()),!1}),e(".ei-remove").live("click",function(){return e(this).parent().remove(),!1}),e(".bl-remove").live("click",function(){e("#blocks").append(e(this).parent());var t=e.unserialize(e(this).parent().find("input[type=hidden]").val()).block_module;return e("#"+t).append(e(this).parent()),!1})},mdcolsort:function(){e(".inner").sortable({connectWith:".ui-sortable",handle:"a.handle",revert:!0,placeholder:"ui-state-highlight",stop:function(i,a){$item=e(a.item),$item.hasClass("ei-processed")||t.essentialItems($item)}})},dragBlocks:function(){e(t.blocks).sortable({connectWith:".ui-sortable",handle:"a.handle",placeholder:"ui-state-highlight",helper:function(t){var i="Add the block";return void 0!==t.currentTarget&&void 0!=e(t.currentTarget).attr("data-title")&&(i=e(t.currentTarget).attr("data-title")),e("<div class='ui-widget-header'>"+i+"</div>")}}).disableSelection()},essentialItems:function(i){var a="",s="",l={};i.hasClass("ei-processed")?(l=i.find("input.setting").val(),i.hasClass("ei-header")?a="Edit the header":i.hasClass("ei-image")?a="Edit the image":i.hasClass("ei-html")?(s="html",a="Edit HTML code"):i.hasClass("ei-list")?a="Edit the list":i.hasClass("ei-iframe")?a="Edit the iframe":i.hasClass("ei-video")&&(a="Edit the video")):(i.hasClass("ei-header")?(s="header",a="Add new header"):i.hasClass("ei-image")?(s="img",a="Add new image"):i.hasClass("ei-link")?(s="a",a="Add new link"):i.hasClass("ei-html")?(s="html",a="Add new HTML code"):i.hasClass("ei-iframe")?(s="iframe",a="Add new iframe"):i.hasClass("ei-video")?(s="video",a="Add new video"):i.hasClass("ei-textblock")?(s="textblock",a="Add new textblock"):i.hasClass("ei-seperator")?(s="seperator",a="Add new seperator"):i.hasClass("ei-seperatortext")?(s="seperatortext",a="Add new seperator with text"):i.hasClass("ei-flickr")?(s="flickr",a="Add new flickr"):i.hasClass("ei-twitter")?(s="twitter",a="Add new twitter"):i.hasClass("ei-gmap")&&(s="gmap",a="Add new gmap"),l.type=s),"seperator"!=l.type&&(e("#dlg-item").loadingDialog(),"html"==s?t.dlg_item.dialog("option","width",800).dialog("option","height",550):t.dlg_item.dialog("option","width",400).dialog("option","height","auto"),t.dlg_item.data("eitem",i).dialog("option","title",a).dialog("open"),e.post(Drupal.settings.basePath+"?q=admin/structure/md-megamenu/essential-item",l,function(t){e("#dlg-item").html(t).unLoadingDialog()}))}};e(window).resize(function(){listcontentw=e(".md-wrap").width()-282,e(".md-listcontent").width(listcontentw)}),Drupal.menuItem=t}(jQuery);
